!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Scroller=e()}(this,(function(){return function(n){var e,o=[],i={},t=n.scenes,f=n.container,r=n.offset,u=0;function c(n,e){for(var o=0,t=(i[n]||[]).slice();o<t.length;o++)t[o](e)}return null==r&&(r=.5),{on:function(n,e){(i[n]||(i[n]=[])).push(e)},off:function(n,e){var o=i[n]||[];o.length&&o.splice(o.indexOf(e)>>>0,1)},init:function(){var n,i,d,l=0,s=-100*(1-r)+"% 0px "+-100*r+"%";for(e=new IntersectionObserver((function(e){for(r=window.pageYOffset,d=r>u,u=r,l=0;l<e.length;l++)i=e[l],n=i.target,s=n===f?"container:":"scene:",c(s+=i.isIntersecting?"enter":"exit",{bounds:i.boundingClientRect,index:o.indexOf(n),isScrollingDown:d,element:n})}),{rootMargin:s}),l=0;l<t.length;l++)o.push(n=t[l]),e.observe(n);f&&e.observe(f),c("init")}}}}));